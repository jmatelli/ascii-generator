(function(){var a,b;a=function(){function a(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;for(this.img=a,c=150,m="",d=this.img.width>c?c:this.img.width,b=this.img.width>c?this.img.height*c/this.img.width:this.img.height,q=document.createElement("canvas"),e=document.getElementById("ascii"),e.classList.remove("hidden"),e.innerHTML="",q.width=d,q.height=b,p=q.getContext("2d"),p.fillStyle="white",p.fillRect(0,0,d,b),p.drawImage(this.img,0,0,d,b),n=p.getImageData(0,0,d,b),i=n.data,l=r=0,s=i.length;s>r;l=r+=4)h=i[l],o=i[l],j=i[l+1],f=i[l+2],k=.2126*o+.7152*j+.0722*f,i[l]=i[l+1]=i[l+2]=k,g=k>250?"&nbsp;":k>230?"`":k>200?":":k>175?"*":k>150?"+":k>125?"#":k>50?"W":"@",0!==l&&l/4%d===0&&(e.innerHTML=e.innerHTML+m,e.appendChild(document.createElement("br")),m=""),m+=g}return a}(),new(b=function(){function b(){var a;this.elm=document.getElementById("uploadImg"),a=this,this.elm.addEventListener?(this.elm.addEventListener("dragover",this.handleDragOver,!1),this.elm.addEventListener("dragleave",this.handleDragLeave,!1),this.elm.addEventListener("drop",function(b){return a.handleFileSelect(b,a)},!1)):elm.attachEvent&&(this.elm.attachEvent("ondragover",this.handleDragOver),this.elm.attachEvent("ondragleave",this.handleDragLeave),this.elm.attachEvent("ondrop",function(b){return a.handleFileSelect(b,a)}))}return b.prototype.handleDragOver=function(a){return a.preventDefault(),a.target.classList.add("dragover")},b.prototype.handleDragLeave=function(a){return a.preventDefault(),a.target.classList.remove("dragover")},b.prototype.handleDragEnd=function(a){return a.preventDefault(),console.log("dragend"),a.target.classList.remove("dragover")},b.prototype.handleFileSelect=function(a,b){var c,d,e,f,g;for(a.preventDefault(),a.target.classList.remove("dragover"),document.getElementById("list").classList.remove("hidden"),d=a.dataTransfer.files,g=[],e=0,f=d.length;f>e;e++)c=d[e],g.push(function(a){var c;return c=new FileReader,c.onload=function(){return function(a){var c;return c=document.createElement("a"),c.href="#",c.innerHTML=['<img class="img-thumbnail" src="',a.target.result,'"/>'].join(""),document.getElementById("list").insertBefore(c,null),c.addEventListener?c.addEventListener("click",function(a){return this.className.match("selected")?b.unselect(a,this):b.select(a,this,this.getElementsByTagName("img")[0])},!1):c.attachEvent?c.attachEvent("onclick",function(a){return this.className.match("selected")?b.unselect(a,this):b.select(a,this,this.getElementsByTagName("img")[0])},!1):void 0}}(a),c.readAsDataURL(a)}(c));return g},b.prototype.select=function(b,c,d){return b.preventDefault(),new a(d)},b.prototype.unselect=function(a){var b;return a.preventDefault(),b=elm||""},b}())}).call(this);